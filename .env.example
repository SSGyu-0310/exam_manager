# =============================================================================
# Core Settings
# =============================================================================
# Flask secret key (프로덕션에서는 반드시 변경)
SECRET_KEY=dev-secret-key-change-in-production

# JWT secret key (프로덕션에서는 반드시 변경)
JWT_SECRET_KEY=dev-jwt-secret-key

# 실행 프로파일 선택
# 개발: FLASK_CONFIG=development
# 운영: FLASK_CONFIG=production
# FLASK_CONFIG=development


# =============================================================================
# Database Operations
# =============================================================================
# Postgres 권장 연결 (DATABASE_URL 우선 적용)
# DATABASE_URL=postgresql+psycopg://user:pass@host:5432/dbname

# SQLite 경로 오버라이드 (DATABASE_URL 미설정 시 사용)
# DB_PATH=./data/exam.db

# 로컬(default/development)에서 Postgres 다운 시 SQLite 자동 폴백
# DEV_FALLBACK_TO_SQLITE_ON_DB_DOWN=1

# Local admin 전용 DB (필요 시 지정)
# LOCAL_ADMIN_DATABASE_URL=postgresql+psycopg://user:pass@host:5432/admin_db

# SQLAlchemy 풀 옵션 (Postgres에서만 적용)
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_RECYCLE=1800

# 요청 본문 최대 크기 (bytes, 기본 100MB)
# MAX_CONTENT_LENGTH=104857600

# DB 자동 생성 (개발 편의; DevelopmentConfig 기본 True)
# AUTO_CREATE_DB=1

# DB 읽기 전용 모드 (쓰기 금지)
# DB_READ_ONLY=0

# 앱 시작 시 미적용 마이그레이션 감지
# CHECK_PENDING_MIGRATIONS=1

# 프로덕션에서 미적용 마이그레이션 있으면 중단
# FAIL_ON_PENDING_MIGRATIONS=0

# 관리자 라우트 접근 제한 (localhost만 허용)
# LOCAL_ADMIN_ONLY=0

# CORS 허용 Origin 목록 (쉼표 구분)
# CORS_ALLOWED_ORIGINS=http://localhost:3000

# local admin DB 경로 (필요 시 지정)
# LOCAL_ADMIN_DB=./data/admin_local.db


# =============================================================================
# Backup
# =============================================================================
# 쓰기 전 핫백업 수행
# AUTO_BACKUP_BEFORE_WRITE=0

# 백업 유지 개수
# AUTO_BACKUP_KEEP=30

# 백업 디렉토리
# AUTO_BACKUP_DIR=./backups

# 프로덕션에서 백업 강제
# ENFORCE_BACKUP_BEFORE_WRITE=0


# =============================================================================
# AI Classification (Gemini)
# =============================================================================
# 조건부: AI 기능 사용 시 필요
# GEMINI_API_KEY=your_api_key_here

# Gemini 모델명
# GEMINI_MODEL_NAME=gemini-2.0-flash-lite

# AI 자동 적용
# AI_AUTO_APPLY=0

# Gemini 최대 출력 토큰
# GEMINI_MAX_OUTPUT_TOKENS=2048


# =============================================================================
# Classifier Cache
# =============================================================================
# 분류기 캐시 경로
# CLASSIFIER_CACHE_PATH=./data/classifier_cache.json


# =============================================================================
# Auto-Confirm V2 (Classifier Enhancement)
# =============================================================================
# AUTO_CONFIRM_V2_ENABLED=1
# AUTO_CONFIRM_V2_DELTA=0.05
# AUTO_CONFIRM_V2_MAX_BM25_RANK=5
# AUTO_CONFIRM_V2_DELTA_UNCERTAIN=0.03
# AUTO_CONFIRM_V2_MIN_CHUNK_LEN=200


# =============================================================================
# Context Expansion
# =============================================================================
# Parent Context Expansion
# PARENT_ENABLED=0
# PARENT_WINDOW_PAGES=1
# PARENT_MAX_CHARS=3500
# PARENT_TOPK=5

# Semantic Expansion
# SEMANTIC_EXPANSION_ENABLED=1
# SEMANTIC_EXPANSION_TOP_N=6
# SEMANTIC_EXPANSION_MAX_EXTRA=2
# SEMANTIC_EXPANSION_QUERY_MAX_CHARS=1200


# =============================================================================
# Retrieval & Search
# =============================================================================
# Retrieval mode: bm25 | hybrid_rrf
# RETRIEVAL_MODE=hybrid_rrf

# RRF K parameter (hybrid_rrf에서만 사용)
# RRF_K=60

# Embedding model
# EMBEDDING_MODEL_NAME=intfloat/multilingual-e5-base
# EMBEDDING_DIM=768
# EMBEDDING_TOP_N=300

# HYDE (Hypothetical Document Embeddings)
# HYDE_ENABLED=0
# HYDE_AUTO_GENERATE=0
# HYDE_PROMPT_VERSION=hyde_v1
# HYDE_MODEL_NAME=
# HYDE_STRATEGY=blend
# HYDE_BM25_VARIANT=mixed_light
# HYDE_NEGATIVE_MODE=stopwords
# HYDE_MARGIN_EPS=0.0
# HYDE_MAX_KEYWORDS=7
# HYDE_MAX_NEGATIVE=6
# HYDE_EMBED_WEIGHT=0.7
# HYDE_EMBED_WEIGHT_ORIG=0.3


# =============================================================================
# PDF Processing
# =============================================================================
# PDF 파서 모드: legacy | experimental
# PDF_PARSER_MODE=legacy
