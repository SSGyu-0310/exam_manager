# Copy to .env.docker and customize.

# Postgres
POSTGRES_USER=exam
POSTGRES_PASSWORD=change_me
POSTGRES_DB=exam_manager
# Optional test DB used by scripts/dev-test-backend
POSTGRES_TEST_DB=exam_manager_test

# Flask
FLASK_CONFIG=production
SECRET_KEY=replace_with_long_random_secret
JWT_SECRET_KEY=replace_with_long_random_jwt_secret
JWT_COOKIE_SECURE=0
# Access token lifetime in minutes (default 720 = 12h)
JWT_ACCESS_TOKEN_EXPIRES_MINUTES=720
# When remaining lifetime is below this window, issue a fresh token cookie.
JWT_REFRESH_WINDOW_MINUTES=30
CORS_ALLOWED_ORIGINS=http://localhost:4000
MAX_CONTENT_LENGTH=104857600
GUNICORN_WORKERS=2
GUNICORN_THREADS=4
GUNICORN_TIMEOUT=120

# Optional AI
# GEMINI_API_KEY=
GEMINI_MODEL_NAME=gemini-2.0-flash-lite

# Search / Classifier pipeline (Postgres-first, no-embedding mode)
RETRIEVAL_MODE=bm25
SEARCH_BACKEND=postgres
SEARCH_PG_QUERY_MODE=websearch
SEARCH_PG_TRGM_ENABLED=0
SEARCH_PG_TRGM_MIN_SIMILARITY=0.2
SEARCH_PG_TRGM_TOP_N=40
CLASSIFIER_ALLOW_ID_FROM_TEXT=0
CLASSIFIER_REQUIRE_VERBATIM_QUOTE=1
CLASSIFIER_REQUIRE_PAGE_SPAN=1
CLASSIFIER_REJUDGE_ENABLED=1
CLASSIFIER_REJUDGE_MIN_CANDIDATES=3
CLASSIFIER_REJUDGE_TOP_K=8
CLASSIFIER_REJUDGE_EVIDENCE_PER_LECTURE=6
CLASSIFIER_REJUDGE_MIN_CONFIDENCE_STRICT=0.80
CLASSIFIER_REJUDGE_ALLOW_WEAK_MATCH=1
CLASSIFIER_REJUDGE_MIN_CONFIDENCE_WEAK=0.65
CLASSIFIER_DEBUG_LOG=0

# Next.js
NEXT_PUBLIC_SITE_URL=http://localhost:4000
NEXT_PUBLIC_APP_URL=http://localhost:4000
